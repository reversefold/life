<!-- saved from url=(0014)about:internet -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>LifeState.as</title>
<link rel="stylesheet" type="text/css" href="../SourceStyles.css"/>
</head>

<body><pre><span class="ActionScriptpackage">package</span> <span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">foxaweb</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">utils</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Raster</span>;
    
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">display</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">BitmapData</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geom</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Point</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geom</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Rectangle</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">utils</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ByteArray</span>;

    <span class="ActionScriptReserved">public</span> <span class="ActionScriptclass">class</span> <span class="ActionScriptDefault_Text">LifeState</span> <span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">WRAP</span> : <span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
        
        <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Embed</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"assets/data/corder-lineship.rle"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">mimeType</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">"application/octet-stream"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">]</span>
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_CORDER_LINESHIP</span>: <span class="ActionScriptDefault_Text">Class</span>;
        <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Embed</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"assets/data/corder-adjustable-lineship-short.rle"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">mimeType</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">"application/octet-stream"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">]</span>
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_CORDER_ADJUSTABLE_LINESHIP</span>: <span class="ActionScriptDefault_Text">Class</span>;
        <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Embed</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"assets/data/glider-stream-crystal.rle"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">mimeType</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">"application/octet-stream"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">]</span>
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_GLIDER_STREAM_CRYSTAL</span>: <span class="ActionScriptDefault_Text">Class</span>;
        <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Embed</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"assets/data/metapixel-galaxy.rle"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">mimeType</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">"application/octet-stream"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">]</span>
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_METAPIXEL_GALAXY</span>: <span class="ActionScriptDefault_Text">Class</span>;
        

        <span class="ActionScriptReserved">public</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">CORDER_LINESHIP</span> : <span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">ByteArray</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">_CORDER_LINESHIP</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">CORDER_ADJUSTABLE_LINESHIP</span> : <span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">ByteArray</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">_CORDER_ADJUSTABLE_LINESHIP</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">GLIDER_STREAM_CRYSTAL</span> : <span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">ByteArray</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">_GLIDER_STREAM_CRYSTAL</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">METAPIXEL_GALAXY</span> : <span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">ByteArray</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">_METAPIXEL_GALAXY</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">REQUESTED_WIDTH</span> : <span class="ActionScriptDefault_Text">uint</span>;
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">REQUESTED_HEIGHT</span> : <span class="ActionScriptDefault_Text">uint</span>;
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">DISPLAY_WIDTH</span> : <span class="ActionScriptDefault_Text">uint</span>;
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">DISPLAY_HEIGHT</span> : <span class="ActionScriptDefault_Text">uint</span>;
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">CHUNKED_WIDTH</span> : <span class="ActionScriptDefault_Text">uint</span>;
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">CHUNKED_HEIGHT</span> : <span class="ActionScriptDefault_Text">uint</span>;
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">FULL_CHUNKED_WIDTH</span> : <span class="ActionScriptDefault_Text">uint</span>;
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">FULL_CHUNKED_HEIGHT</span> : <span class="ActionScriptDefault_Text">uint</span>;
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">FULL_CHUNKED_LENGTH</span> : <span class="ActionScriptDefault_Text">uint</span>;
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">FULL_CHUNKED_LIVE_LENGTH</span> : <span class="ActionScriptDefault_Text">uint</span>;
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">FULL_DISPLAY_WIDTH</span> : <span class="ActionScriptDefault_Text">uint</span>;
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">FULL_DISPLAY_HEIGHT</span> : <span class="ActionScriptDefault_Text">uint</span>;

        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">cacheData</span> : <span class="ActionScriptDefault_Text">CacheData</span>;
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">upIdx</span> : <span class="ActionScriptDefault_Text">uint</span>;
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">downIdx</span> : <span class="ActionScriptDefault_Text">uint</span>;
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">currentState</span> : <span class="ActionScriptDefault_Text">Chunk</span>;
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">nextState</span> : <span class="ActionScriptDefault_Text">Chunk</span>;
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">point</span> : <span class="ActionScriptDefault_Text">Point</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Point</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;

        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">currentStates</span> : <span class="ActionScriptDefault_Text">Vector</span><span class="ActionScriptBracket/Brace">.&lt;</span><span class="ActionScriptDefault_Text">uint</span><span class="ActionScriptBracket/Brace">&gt;</span>;
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">nextStates</span> : <span class="ActionScriptDefault_Text">Vector</span><span class="ActionScriptBracket/Brace">.&lt;</span><span class="ActionScriptDefault_Text">uint</span><span class="ActionScriptBracket/Brace">&gt;</span>;
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">points</span> : <span class="ActionScriptDefault_Text">Vector</span><span class="ActionScriptBracket/Brace">.&lt;</span><span class="ActionScriptDefault_Text">Point</span><span class="ActionScriptBracket/Brace">&gt;</span>;
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">stateNeighbors</span> : <span class="ActionScriptDefault_Text">Vector</span><span class="ActionScriptBracket/Brace">.&lt;</span><span class="ActionScriptDefault_Text">Chunk</span><span class="ActionScriptBracket/Brace">&gt;</span>;
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">currentChunksToCheck</span> : <span class="ActionScriptDefault_Text">Vector</span><span class="ActionScriptBracket/Brace">.&lt;</span><span class="ActionScriptDefault_Text">Boolean</span><span class="ActionScriptBracket/Brace">&gt;</span>;
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">nextChunksToCheck</span> : <span class="ActionScriptDefault_Text">Vector</span><span class="ActionScriptBracket/Brace">.&lt;</span><span class="ActionScriptDefault_Text">Boolean</span><span class="ActionScriptBracket/Brace">&gt;</span>;

        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">bitmapData</span> : <span class="ActionScriptDefault_Text">Raster</span>;

        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">chunkRect</span> : <span class="ActionScriptDefault_Text">Rectangle</span>;

        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">LifeState</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">inCacheData</span> : <span class="ActionScriptDefault_Text">CacheData</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">cacheData</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">inCacheData</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">reset</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">requestedWidth</span> : <span class="ActionScriptDefault_Text">uint</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">requestedHeight</span> : <span class="ActionScriptDefault_Text">uint</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">type</span> : <span class="ActionScriptDefault_Text">uint</span><span class="ActionScriptBracket/Brace">)</span> : <span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">REQUESTED_WIDTH</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">requestedWidth</span>;
            <span class="ActionScriptDefault_Text">REQUESTED_HEIGHT</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">requestedHeight</span>;
            
            <span class="ActionScriptDefault_Text">DISPLAY_WIDTH</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">int</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">REQUESTED_WIDTH</span> <span class="ActionScriptOperator">/</span> <span class="ActionScriptDefault_Text">cacheData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">CACHE_WIDTH</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">cacheData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">CACHE_WIDTH</span>;
            <span class="ActionScriptDefault_Text">DISPLAY_HEIGHT</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">int</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">REQUESTED_HEIGHT</span> <span class="ActionScriptOperator">/</span> <span class="ActionScriptDefault_Text">cacheData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">CACHE_HEIGHT</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">cacheData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">CACHE_HEIGHT</span>;
            
            <span class="ActionScriptDefault_Text">CHUNKED_WIDTH</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">DISPLAY_WIDTH</span> <span class="ActionScriptOperator">/</span> <span class="ActionScriptDefault_Text">cacheData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">CACHE_WIDTH</span>;
            <span class="ActionScriptDefault_Text">CHUNKED_HEIGHT</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">DISPLAY_HEIGHT</span> <span class="ActionScriptOperator">/</span> <span class="ActionScriptDefault_Text">cacheData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">CACHE_HEIGHT</span>;
            
            <span class="ActionScriptDefault_Text">FULL_CHUNKED_WIDTH</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">CHUNKED_WIDTH</span> <span class="ActionScriptOperator">+</span> 2;
            <span class="ActionScriptDefault_Text">FULL_CHUNKED_HEIGHT</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">CHUNKED_HEIGHT</span> <span class="ActionScriptOperator">+</span> 2;
            
            <span class="ActionScriptDefault_Text">FULL_CHUNKED_LENGTH</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">FULL_CHUNKED_WIDTH</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">FULL_CHUNKED_HEIGHT</span>;
            <span class="ActionScriptDefault_Text">FULL_CHUNKED_LIVE_LENGTH</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">FULL_CHUNKED_LENGTH</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">FULL_CHUNKED_WIDTH</span>;
            
            <span class="ActionScriptDefault_Text">FULL_DISPLAY_WIDTH</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">DISPLAY_WIDTH</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">cacheData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">CACHE_WIDTH</span> <span class="ActionScriptOperator">*</span> 2;
            <span class="ActionScriptDefault_Text">FULL_DISPLAY_HEIGHT</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">DISPLAY_HEIGHT</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">cacheData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">CACHE_HEIGHT</span> <span class="ActionScriptOperator">*</span> 2;
            
            <span class="ActionScriptDefault_Text">chunkRect</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Rectangle</span><span class="ActionScriptBracket/Brace">(</span>0<span class="ActionScriptOperator">,</span> 0<span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">cacheData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">CACHE_WIDTH</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">cacheData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">CACHE_HEIGHT</span><span class="ActionScriptBracket/Brace">)</span>;

            <span class="ActionScriptDefault_Text">currentStates</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Vector</span><span class="ActionScriptBracket/Brace">.&lt;</span><span class="ActionScriptDefault_Text">uint</span><span class="ActionScriptBracket/Brace">&gt;</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">FULL_CHUNKED_LENGTH</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">nextStates</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Vector</span><span class="ActionScriptBracket/Brace">.&lt;</span><span class="ActionScriptDefault_Text">uint</span><span class="ActionScriptBracket/Brace">&gt;</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">FULL_CHUNKED_LENGTH</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">points</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Vector</span><span class="ActionScriptBracket/Brace">.&lt;</span><span class="ActionScriptDefault_Text">Point</span><span class="ActionScriptBracket/Brace">&gt;</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">FULL_CHUNKED_LENGTH</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">stateNeighbors</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Vector</span><span class="ActionScriptBracket/Brace">.&lt;</span><span class="ActionScriptDefault_Text">Chunk</span><span class="ActionScriptBracket/Brace">&gt;</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">FULL_CHUNKED_LENGTH</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">i</span> : <span class="ActionScriptDefault_Text">uint</span>;
            
            <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">FULL_CHUNKED_WIDTH</span> <span class="ActionScriptOperator">+</span> 1; <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">FULL_CHUNKED_LIVE_LENGTH</span>; <span class="ActionScriptOperator">++</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">points</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Point</span><span class="ActionScriptBracket/Brace">(</span>
                    <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">%</span> <span class="ActionScriptDefault_Text">FULL_CHUNKED_WIDTH</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">cacheData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">CACHE_WIDTH</span><span class="ActionScriptOperator">,</span>
                    <span class="ActionScriptDefault_Text">int</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">int</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">/</span> <span class="ActionScriptDefault_Text">int</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">FULL_CHUNKED_WIDTH</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">cacheData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">CACHE_HEIGHT</span>
                <span class="ActionScriptBracket/Brace">)</span>;
                
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">neighbors</span> : <span class="ActionScriptDefault_Text">Chunk</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Chunk</span><span class="ActionScriptBracket/Brace">(</span>0<span class="ActionScriptOperator">,</span> 0<span class="ActionScriptBracket/Brace">)</span>;
                
                <span class="ActionScriptDefault_Text">upIdx</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">FULL_CHUNKED_WIDTH</span>;
                <span class="ActionScriptDefault_Text">downIdx</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">FULL_CHUNKED_WIDTH</span>;
                
                <span class="ActionScriptDefault_Text">neighbors</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">topLeft</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">upIdx</span> <span class="ActionScriptOperator">-</span> 1;
                <span class="ActionScriptDefault_Text">neighbors</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">topRight</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">upIdx</span> <span class="ActionScriptOperator">+</span> 1;
                <span class="ActionScriptDefault_Text">neighbors</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">bottomLeft</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">downIdx</span> <span class="ActionScriptOperator">-</span> 1;
                <span class="ActionScriptDefault_Text">neighbors</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">bottomRight</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">downIdx</span> <span class="ActionScriptOperator">+</span> 1;
                
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">off</span> : <span class="ActionScriptDefault_Text">int</span>;
                
                <span class="ActionScriptDefault_Text">neighbors</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">top</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">upIdx</span>;
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">WRAP</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">neighbors</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">top</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">FULL_CHUNKED_WIDTH</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">off</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">FULL_CHUNKED_LENGTH</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">FULL_CHUNKED_WIDTH</span> <span class="ActionScriptOperator">*</span> 2;
                    <span class="ActionScriptDefault_Text">neighbors</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">top</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">off</span>;
                    <span class="ActionScriptDefault_Text">neighbors</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">topLeft</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">off</span>;
                    <span class="ActionScriptDefault_Text">neighbors</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">topRight</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">off</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptDefault_Text">neighbors</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">bottom</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">downIdx</span>;
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">WRAP</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">neighbors</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">bottom</span> <span class="ActionScriptOperator">&gt;</span> <span class="ActionScriptDefault_Text">FULL_CHUNKED_LENGTH</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">FULL_CHUNKED_WIDTH</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">off</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">FULL_CHUNKED_WIDTH</span> <span class="ActionScriptOperator">*</span> 2 <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">FULL_CHUNKED_LENGTH</span>;
                    <span class="ActionScriptDefault_Text">neighbors</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">bottom</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">off</span>;
                    <span class="ActionScriptDefault_Text">neighbors</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">bottomLeft</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">off</span>;
                    <span class="ActionScriptDefault_Text">neighbors</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">bottomRight</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">off</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptDefault_Text">neighbors</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">left</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">-</span> 1;
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">WRAP</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">neighbors</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">left</span> <span class="ActionScriptOperator">%</span> <span class="ActionScriptDefault_Text">FULL_CHUNKED_WIDTH</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">==</span> 0<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">off</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">FULL_CHUNKED_WIDTH</span> <span class="ActionScriptOperator">-</span> 2;
                    <span class="ActionScriptDefault_Text">neighbors</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">left</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">off</span>;
                    <span class="ActionScriptDefault_Text">neighbors</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">topLeft</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">off</span>;
                    <span class="ActionScriptDefault_Text">neighbors</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">bottomLeft</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">off</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptDefault_Text">neighbors</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">right</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">+</span> 1;
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">WRAP</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">neighbors</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">right</span> <span class="ActionScriptOperator">+</span> 1<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">%</span> <span class="ActionScriptDefault_Text">FULL_CHUNKED_WIDTH</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">==</span> 0<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">off</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">FULL_CHUNKED_WIDTH</span> <span class="ActionScriptOperator">-</span> 2;
                    <span class="ActionScriptDefault_Text">neighbors</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">right</span> <span class="ActionScriptOperator">-=</span> <span class="ActionScriptDefault_Text">off</span>;
                    <span class="ActionScriptDefault_Text">neighbors</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">topRight</span> <span class="ActionScriptOperator">-=</span> <span class="ActionScriptDefault_Text">off</span>;
                    <span class="ActionScriptDefault_Text">neighbors</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">bottomRight</span> <span class="ActionScriptOperator">-=</span> <span class="ActionScriptDefault_Text">off</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                
                <span class="ActionScriptDefault_Text">stateNeighbors</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">neighbors</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptDefault_Text">currentChunksToCheck</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Vector</span><span class="ActionScriptBracket/Brace">.&lt;</span><span class="ActionScriptDefault_Text">Boolean</span><span class="ActionScriptBracket/Brace">&gt;</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">FULL_CHUNKED_LENGTH</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">nextChunksToCheck</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Vector</span><span class="ActionScriptBracket/Brace">.&lt;</span><span class="ActionScriptDefault_Text">Boolean</span><span class="ActionScriptBracket/Brace">&gt;</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">FULL_CHUNKED_LENGTH</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)</span>;

            <span class="ActionScriptDefault_Text">bitmapData</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Raster</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">FULL_DISPLAY_WIDTH</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">FULL_DISPLAY_HEIGHT</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">y</span> : <span class="ActionScriptDefault_Text">uint</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">yo</span> : <span class="ActionScriptDefault_Text">uint</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">x</span> : <span class="ActionScriptDefault_Text">uint</span>;
            <span class="ActionScriptReserved">switch</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">type</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">case</span> 6:
                    <span class="ActionScriptDefault_Text">parseRLE</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">METAPIXEL_GALAXY</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptReserved">break</span>;
                <span class="ActionScriptReserved">case</span> 5:
                    <span class="ActionScriptDefault_Text">parseRLE</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">GLIDER_STREAM_CRYSTAL</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptReserved">break</span>;
                <span class="ActionScriptReserved">case</span> 4:
                    <span class="ActionScriptDefault_Text">parseRLE</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">CORDER_ADJUSTABLE_LINESHIP</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptReserved">break</span>;
                <span class="ActionScriptReserved">case</span> 3:
                    <span class="ActionScriptDefault_Text">parseRLE</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">CORDER_LINESHIP</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptReserved">break</span>;
                <span class="ActionScriptReserved">case</span> 2:
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">m</span> : <span class="ActionScriptDefault_Text">uint</span> <span class="ActionScriptOperator">=</span> 7 <span class="ActionScriptOperator">&lt;&lt;</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">cacheData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">FULL_CACHE_WIDTH</span> <span class="ActionScriptOperator">+</span> 1<span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">=</span> 2; <span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">cacheData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">FULL_CACHE_HEIGHT</span> <span class="ActionScriptOperator">-</span> 1; <span class="ActionScriptOperator">++</span><span class="ActionScriptDefault_Text">y</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">m</span> <span class="ActionScriptOperator">|=</span> 1 <span class="ActionScriptOperator">&lt;&lt;</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">cacheData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">FULL_CACHE_WIDTH</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">+</span> 1<span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">=</span> 1; <span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">CHUNKED_HEIGHT</span> <span class="ActionScriptOperator">-</span> 1; <span class="ActionScriptDefault_Text">y</span><span class="ActionScriptOperator">+=</span>2<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">yo</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">FULL_CHUNKED_WIDTH</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">y</span>;
                        <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">=</span> 1; <span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">CHUNKED_WIDTH</span> <span class="ActionScriptOperator">-</span> 1; <span class="ActionScriptOperator">++</span><span class="ActionScriptDefault_Text">x</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptDefault_Text">currentStates</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">yo</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">m</span>;
                        <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptReserved">break</span>;
                <span class="ActionScriptReserved">case</span> 1:
                    <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">CHUNKED_HEIGHT</span> <span class="ActionScriptOperator">/</span> 4 <span class="ActionScriptOperator">+</span> 1; <span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">CHUNKED_HEIGHT</span> <span class="ActionScriptOperator">*</span> 3 <span class="ActionScriptOperator">/</span> 4 <span class="ActionScriptOperator">+</span> 1; <span class="ActionScriptOperator">++</span><span class="ActionScriptDefault_Text">y</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">yo</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">FULL_CHUNKED_WIDTH</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">y</span>;
                        <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">CHUNKED_WIDTH</span> <span class="ActionScriptOperator">/</span> 4 <span class="ActionScriptOperator">+</span> 1; <span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">CHUNKED_WIDTH</span> <span class="ActionScriptOperator">*</span> 3 <span class="ActionScriptOperator">/</span> 4 <span class="ActionScriptOperator">+</span> 1; <span class="ActionScriptOperator">++</span><span class="ActionScriptDefault_Text">x</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptDefault_Text">currentStates</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">yo</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">cacheData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">masks</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">inner</span>;
                        <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptReserved">break</span>;
                <span class="ActionScriptReserved">case</span> 0:
                <span class="ActionScriptReserved">default</span>:
                    <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">=</span> 1; <span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">CHUNKED_HEIGHT</span> <span class="ActionScriptOperator">-</span> 1; <span class="ActionScriptOperator">++</span><span class="ActionScriptDefault_Text">y</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">yo</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">FULL_CHUNKED_WIDTH</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">y</span>;
                        <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">=</span> 1; <span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">CHUNKED_WIDTH</span> <span class="ActionScriptOperator">-</span> 1; <span class="ActionScriptOperator">++</span><span class="ActionScriptDefault_Text">x</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptDefault_Text">currentStates</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">yo</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">cacheData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">masks</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">inner</span> <span class="ActionScriptOperator">&amp;</span> <span class="ActionScriptDefault_Text">uint</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">Math</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">random</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">uint</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">MAX_VALUE</span><span class="ActionScriptBracket/Brace">)</span>;
                        <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptReserved">break</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptDefault_Text">currentChunksToCheck</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Vector</span><span class="ActionScriptBracket/Brace">.&lt;</span><span class="ActionScriptDefault_Text">Boolean</span><span class="ActionScriptBracket/Brace">&gt;</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">FULL_CHUNKED_LENGTH</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">FULL_CHUNKED_WIDTH</span> <span class="ActionScriptOperator">+</span> 1; <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">FULL_CHUNKED_LIVE_LENGTH</span>; <span class="ActionScriptOperator">++</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">%</span> <span class="ActionScriptDefault_Text">FULL_CHUNKED_WIDTH</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">FULL_CHUNKED_WIDTH</span> <span class="ActionScriptOperator">-</span> 1<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptOperator">++</span><span class="ActionScriptDefault_Text">i</span>;
                    <span class="ActionScriptReserved">continue</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptDefault_Text">currentChunksToCheck</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">drawChunked</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span> : <span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">bitmapData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">lock</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">i</span> : <span class="ActionScriptDefault_Text">uint</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">FULL_CHUNKED_WIDTH</span> <span class="ActionScriptOperator">+</span> 1; <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">FULL_CHUNKED_LIVE_LENGTH</span>; <span class="ActionScriptOperator">++</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span>
                    <span class="ActionScriptComment">//checks for the last index in a row, which is always dead
</span>                    <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">%</span> <span class="ActionScriptDefault_Text">FULL_CHUNKED_WIDTH</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">FULL_CHUNKED_WIDTH</span> <span class="ActionScriptOperator">-</span> 1
                <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptComment">//skips the first index in a row as well, which is also always dead
</span>                    <span class="ActionScriptOperator">++</span><span class="ActionScriptDefault_Text">i</span>;
                    <span class="ActionScriptReserved">continue</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">cacheData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">states</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">currentStates</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">cacheData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">generator</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">calculateState</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentStates</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptDefault_Text">bitmapData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">copyPixels</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">cacheData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">states</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">currentStates</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">bitmapData</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">chunkRect</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">points</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptDefault_Text">bitmapData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">unlock</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">drawChunkedAndNext</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span> : <span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">bitmapData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">lock</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">nextChunksToCheck</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Vector</span><span class="ActionScriptBracket/Brace">.&lt;</span><span class="ActionScriptDefault_Text">Boolean</span><span class="ActionScriptBracket/Brace">&gt;</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">FULL_CHUNKED_LENGTH</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">i</span> : <span class="ActionScriptDefault_Text">uint</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">FULL_CHUNKED_WIDTH</span> <span class="ActionScriptOperator">+</span> 1; <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">FULL_CHUNKED_LIVE_LENGTH</span>; <span class="ActionScriptOperator">++</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptComment">/*
                if (
                    //checks for the last index in a row, which is always dead
                    (i % FULL_CHUNKED_WIDTH) == FULL_CHUNKED_WIDTH - 1
                ) {
                    //skips the first index in a row as well, which is also always dead
                    ++i;
                    continue;
                }
                */</span>
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">currentChunksToCheck</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">continue</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">neighbors</span> : <span class="ActionScriptDefault_Text">Chunk</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">stateNeighbors</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span>;
                <span class="ActionScriptDefault_Text">nextStates</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">cacheData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getNextState</span><span class="ActionScriptBracket/Brace">(</span>
                    <span class="ActionScriptDefault_Text">currentStates</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span>
                    <span class="ActionScriptOperator">|</span> <span class="ActionScriptDefault_Text">cacheData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">states</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">currentStates</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">neighbors</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">top</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">bottom</span>
                    <span class="ActionScriptOperator">|</span> <span class="ActionScriptDefault_Text">cacheData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">states</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">currentStates</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">neighbors</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">bottom</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">top</span>
                    <span class="ActionScriptOperator">|</span> <span class="ActionScriptDefault_Text">cacheData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">states</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">currentStates</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">neighbors</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">left</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">right</span>
                    <span class="ActionScriptOperator">|</span> <span class="ActionScriptDefault_Text">cacheData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">states</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">currentStates</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">neighbors</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">right</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">left</span>
                    
                    <span class="ActionScriptOperator">|</span> <span class="ActionScriptDefault_Text">cacheData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">states</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">currentStates</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">neighbors</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">topLeft</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">bottomRight</span>
                    <span class="ActionScriptOperator">|</span> <span class="ActionScriptDefault_Text">cacheData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">states</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">currentStates</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">neighbors</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">topRight</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">bottomLeft</span>
                    <span class="ActionScriptOperator">|</span> <span class="ActionScriptDefault_Text">cacheData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">states</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">currentStates</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">neighbors</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">bottomLeft</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">topRight</span>
                    <span class="ActionScriptOperator">|</span> <span class="ActionScriptDefault_Text">cacheData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">states</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">currentStates</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">neighbors</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">bottomRight</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">topLeft</span>
                <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentStates</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">^</span> <span class="ActionScriptDefault_Text">nextStates</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">bitmapData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">copyPixels</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">cacheData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">states</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">nextStates</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">bitmapData</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">chunkRect</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">points</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">)</span>;
                    
                    <span class="ActionScriptDefault_Text">currentState</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">cacheData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">states</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">currentStates</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">]</span>;
                    <span class="ActionScriptDefault_Text">nextState</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">cacheData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">states</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">nextStates</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">]</span>;
                    <span class="ActionScriptDefault_Text">nextChunksToCheck</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;

                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">bottom</span> <span class="ActionScriptOperator">^</span> <span class="ActionScriptDefault_Text">nextState</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">bottom</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">nextChunksToCheck</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">neighbors</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">bottom</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">top</span> <span class="ActionScriptOperator">^</span> <span class="ActionScriptDefault_Text">nextState</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">top</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">nextChunksToCheck</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">neighbors</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">top</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">left</span> <span class="ActionScriptOperator">^</span> <span class="ActionScriptDefault_Text">nextState</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">left</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">nextChunksToCheck</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">neighbors</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">left</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">right</span> <span class="ActionScriptOperator">^</span> <span class="ActionScriptDefault_Text">nextState</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">right</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">nextChunksToCheck</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">neighbors</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">right</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">bottomLeft</span> <span class="ActionScriptOperator">^</span> <span class="ActionScriptDefault_Text">nextState</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">bottomLeft</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">nextChunksToCheck</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">neighbors</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">bottomLeft</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">bottomRight</span> <span class="ActionScriptOperator">^</span> <span class="ActionScriptDefault_Text">nextState</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">bottomRight</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">nextChunksToCheck</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">neighbors</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">bottomRight</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">topLeft</span> <span class="ActionScriptOperator">^</span> <span class="ActionScriptDefault_Text">nextState</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">topLeft</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">nextChunksToCheck</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">neighbors</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">topLeft</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">topRight</span> <span class="ActionScriptOperator">^</span> <span class="ActionScriptDefault_Text">nextState</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">topRight</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">nextChunksToCheck</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">neighbors</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">topRight</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptDefault_Text">bitmapData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">unlock</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;

            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">tmpStates</span> : <span class="ActionScriptDefault_Text">Vector</span><span class="ActionScriptBracket/Brace">.&lt;</span><span class="ActionScriptDefault_Text">uint</span><span class="ActionScriptBracket/Brace">&gt;</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">currentStates</span>;
            <span class="ActionScriptDefault_Text">currentStates</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">nextStates</span>;
            <span class="ActionScriptDefault_Text">nextStates</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">tmpStates</span>;
            
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">tempChunksToCheck</span> : <span class="ActionScriptDefault_Text">Vector</span><span class="ActionScriptBracket/Brace">.&lt;</span><span class="ActionScriptDefault_Text">Boolean</span><span class="ActionScriptBracket/Brace">&gt;</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">currentChunksToCheck</span>;
            <span class="ActionScriptDefault_Text">currentChunksToCheck</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">nextChunksToCheck</span>;
            <span class="ActionScriptDefault_Text">nextChunksToCheck</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">tempChunksToCheck</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">setPixel</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">x</span> : <span class="ActionScriptDefault_Text">uint</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">y</span> : <span class="ActionScriptDefault_Text">uint</span><span class="ActionScriptBracket/Brace">)</span> : <span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">idx</span> : <span class="ActionScriptDefault_Text">uint</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">int</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">/</span> <span class="ActionScriptDefault_Text">cacheData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">CACHE_WIDTH</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">+</span> 1
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">int</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">/</span> <span class="ActionScriptDefault_Text">cacheData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">CACHE_HEIGHT</span> <span class="ActionScriptOperator">+</span> 1<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">FULL_CHUNKED_WIDTH</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">xxx</span> : <span class="ActionScriptDefault_Text">uint</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">%</span> <span class="ActionScriptDefault_Text">cacheData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">CACHE_WIDTH</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">yyy</span> : <span class="ActionScriptDefault_Text">uint</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">%</span> <span class="ActionScriptDefault_Text">cacheData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">CACHE_HEIGHT</span>;
            <span class="ActionScriptDefault_Text">currentStates</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">idx</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">|=</span> 0x1 <span class="ActionScriptOperator">&lt;&lt;</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">xxx</span> <span class="ActionScriptOperator">+</span> 1 <span class="ActionScriptOperator">+</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">yyy</span> <span class="ActionScriptOperator">+</span> 1<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">cacheData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">FULL_CACHE_WIDTH</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">parseRLE</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">str</span> : <span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">)</span> : <span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptComment">// unify newlines
</span>            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">str</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">replace</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">/(\r\n|\n|\r)/g</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">"\n"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">i</span> : <span class="ActionScriptDefault_Text">uint</span> <span class="ActionScriptOperator">=</span> 0;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">line</span> : <span class="ActionScriptDefault_Text">String</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">lines</span> : <span class="ActionScriptDefault_Text">Vector</span><span class="ActionScriptBracket/Brace">.&lt;</span><span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">&gt;</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Vector</span><span class="ActionScriptBracket/Brace">.&lt;</span><span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">&gt;</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">str</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">split</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"\n"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">lines2</span> : <span class="ActionScriptDefault_Text">Vector</span><span class="ActionScriptBracket/Brace">.&lt;</span><span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">&gt;</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Vector</span><span class="ActionScriptBracket/Brace">.&lt;</span><span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">&gt;</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptComment">// remove comments and whitespace
</span>            <span class="ActionScriptReserved">for each</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">line</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">lines</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">line</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">line</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">replace</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">/\s+/g</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">""</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">line</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span> <span class="ActionScriptOperator">&gt;</span> 0 <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">line</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">charAt</span><span class="ActionScriptBracket/Brace">(</span>0<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptString">"#"</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">lines2</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">line</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptDefault_Text">lines</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">lines2</span>;
            <span class="ActionScriptComment">// First line, width and height
</span>            <span class="ActionScriptDefault_Text">line</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">lines</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">shift</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">parts</span> : <span class="ActionScriptDefault_Text">Vector</span><span class="ActionScriptBracket/Brace">.&lt;</span><span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">&gt;</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Vector</span><span class="ActionScriptBracket/Brace">.&lt;</span><span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">&gt;</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">line</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">split</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">","</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">width</span> : <span class="ActionScriptDefault_Text">uint</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">height</span> : <span class="ActionScriptDefault_Text">uint</span>;
            <span class="ActionScriptReserved">for each</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">part</span> : <span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">parts</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">bits</span> : <span class="ActionScriptDefault_Text">Vector</span><span class="ActionScriptBracket/Brace">.&lt;</span><span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">&gt;</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Vector</span><span class="ActionScriptBracket/Brace">.&lt;</span><span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">&gt;</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">part</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">split</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"="</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bits</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"x"</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">width</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">uint</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bits</span><span class="ActionScriptBracket/Brace">[</span>1<span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span> <span class="ActionScriptReserved">else</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">height</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">uint</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bits</span><span class="ActionScriptBracket/Brace">[</span>1<span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">lines</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">join</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">""</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">numStr</span> : <span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">""</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">num</span> : <span class="ActionScriptDefault_Text">uint</span> <span class="ActionScriptOperator">=</span> 1;
            <span class="ActionScriptComment">// empty the screen
</span>            <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">FULL_CHUNKED_WIDTH</span> <span class="ActionScriptOperator">+</span> 1; <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">FULL_CHUNKED_LIVE_LENGTH</span>; <span class="ActionScriptOperator">++</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">%</span> <span class="ActionScriptDefault_Text">FULL_CHUNKED_WIDTH</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">FULL_CHUNKED_WIDTH</span> <span class="ActionScriptOperator">-</span> 1<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptOperator">++</span><span class="ActionScriptDefault_Text">i</span>;
                    <span class="ActionScriptReserved">continue</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptDefault_Text">currentStates</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">nextStates</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> 0x0;
                <span class="ActionScriptDefault_Text">nextChunksToCheck</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">currentChunksToCheck</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">x</span> : <span class="ActionScriptDefault_Text">uint</span> <span class="ActionScriptOperator">=</span> 0;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">y</span> : <span class="ActionScriptDefault_Text">uint</span> <span class="ActionScriptOperator">=</span> 0;
            <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">str</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span>; <span class="ActionScriptOperator">++</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">char</span> : <span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">str</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">charAt</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">char</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">charCodeAt</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">&gt;=</span> <span class="ActionScriptString">'0'</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">charCodeAt</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">char</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">charCodeAt</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">&lt;=</span> <span class="ActionScriptString">'9'</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">charCodeAt</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">numStr</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">char</span>;
                <span class="ActionScriptBracket/Brace">}</span> <span class="ActionScriptReserved">else</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">numStr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span> <span class="ActionScriptOperator">&gt;</span> 0<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">num</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">uint</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">numStr</span><span class="ActionScriptBracket/Brace">)</span>;
                        <span class="ActionScriptDefault_Text">numStr</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">""</span>;
                    <span class="ActionScriptBracket/Brace">}</span> <span class="ActionScriptReserved">else</span> <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">num</span> <span class="ActionScriptOperator">=</span> 1;
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptReserved">switch</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">char</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptReserved">case</span> <span class="ActionScriptString">"b"</span>:
                            <span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">num</span>;
                            <span class="ActionScriptReserved">break</span>;
                        <span class="ActionScriptReserved">case</span> <span class="ActionScriptString">"$"</span>:
                            <span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">num</span>;
                            <span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">=</span> 0;
                            <span class="ActionScriptComment">/*
                            if (y &gt; height) {
                                return;
                            }
                            */</span>
                            <span class="ActionScriptReserved">break</span>;
                        <span class="ActionScriptReserved">case</span> <span class="ActionScriptString">"o"</span>:
                            <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">j</span> : <span class="ActionScriptDefault_Text">uint</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">j</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">num</span>; <span class="ActionScriptOperator">++</span><span class="ActionScriptDefault_Text">j</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">xx</span> : <span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">int</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">CHUNKED_WIDTH</span> <span class="ActionScriptOperator">/</span> 2<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">cacheData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">CACHE_WIDTH</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">int</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">width</span> <span class="ActionScriptOperator">/</span> 2<span class="ActionScriptBracket/Brace">)</span>;
                                <span class="ActionScriptOperator">++</span><span class="ActionScriptDefault_Text">x</span>;
                                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">yy</span> : <span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">int</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">CHUNKED_HEIGHT</span> <span class="ActionScriptOperator">/</span> 2<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">cacheData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">CACHE_HEIGHT</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">int</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">height</span> <span class="ActionScriptOperator">/</span> 2<span class="ActionScriptBracket/Brace">)</span>;
                                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">xx</span> <span class="ActionScriptOperator">&gt;=</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">CHUNKED_WIDTH</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">cacheData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">CACHE_WIDTH</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                                    <span class="ActionScriptComment">//continue;
</span>                                    <span class="ActionScriptDefault_Text">xx</span> <span class="ActionScriptOperator">%=</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">CHUNKED_WIDTH</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">cacheData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">CACHE_WIDTH</span><span class="ActionScriptBracket/Brace">)</span>;
                                <span class="ActionScriptBracket/Brace">}</span>
                                <span class="ActionScriptComment">/*
                                if (xx &lt; 0) {
                                    continue;
                                }
                                */</span>
                                <span class="ActionScriptReserved">while</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">xx</span> <span class="ActionScriptOperator">&lt;</span> 0<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                                    <span class="ActionScriptDefault_Text">xx</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">CHUNKED_WIDTH</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">cacheData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">CACHE_WIDTH</span>;
                                <span class="ActionScriptBracket/Brace">}</span>
                                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">yy</span> <span class="ActionScriptOperator">&gt;=</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">CHUNKED_HEIGHT</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">cacheData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">CACHE_HEIGHT</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                                    <span class="ActionScriptComment">//continue;
</span>                                    <span class="ActionScriptDefault_Text">yy</span> <span class="ActionScriptOperator">%=</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">CHUNKED_HEIGHT</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">cacheData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">CACHE_HEIGHT</span><span class="ActionScriptBracket/Brace">)</span>;
                                <span class="ActionScriptBracket/Brace">}</span>
                                <span class="ActionScriptComment">/*
                                if (yy &lt; 0) {
                                    continue;
                                }
                                */</span>
                                <span class="ActionScriptReserved">while</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">yy</span> <span class="ActionScriptOperator">&lt;</span> 0<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                                    <span class="ActionScriptDefault_Text">yy</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">CHUNKED_HEIGHT</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">cacheData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">CACHE_HEIGHT</span>;
                                <span class="ActionScriptBracket/Brace">}</span>
                                <span class="ActionScriptDefault_Text">setPixel</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">xx</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">yy</span><span class="ActionScriptBracket/Brace">)</span>;
                            <span class="ActionScriptBracket/Brace">}</span>
                            <span class="ActionScriptReserved">break</span>;
                        <span class="ActionScriptReserved">case</span> <span class="ActionScriptString">"!"</span>:
                            <span class="ActionScriptReserved">return</span>;
                        <span class="ActionScriptReserved">default</span>:
                            <span class="ActionScriptReserved">throw</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Error</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"What is a '"</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">char</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">"'?"</span><span class="ActionScriptBracket/Brace">)</span>;
                            <span class="ActionScriptReserved">break</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptBracket/Brace">}</span>
<span class="ActionScriptBracket/Brace">}</span>
</pre></body>
</html>
